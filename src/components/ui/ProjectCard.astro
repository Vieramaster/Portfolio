---
import IconLink from "./IconLink.astro";
import GithubIco from "../icons/social_icons/GithubIco.astro";
import LinkIco from "../icons/extras/LinkIco.astro";
import ALL_TECH_ICONS from "../../data/ALL_TECH_ICONS";
ALL_TECH_ICONS;

const {
  projectName,
  image,
  github,
  project_url,
  technologies = [],
  description,
} = Astro.props;

const stack = ALL_TECH_ICONS.filter(({ label }) =>
  technologies.includes(label)
);
---

<li class="h-full w-full" data-id="card" role="group" aria-label={projectName}>
  <img
    class="w-full object-cover
            h-1/2
            xl:h-1/2"
    src={image}
    alt={`${projectName} preview`}
    loading="lazy"
    decoding="async"
  />
  <article
    class="bg-card
            flex flex-col justify-center gap-3
             w-full px-3 text-left
            h-1/2
            xl:h-1/2"
  >
    <div class="flex justify-between">
      <h3 class="text-4xl text-detail font-bold font-headings">
        {projectName}
      </h3>
      <nav class="flex items-center gap-2">
        <IconLink href={github} label="title" Icon={GithubIco} />
        <IconLink href={project_url} label="title" Icon={LinkIco} />
      </nav>
    </div>
    <p>
      {description}
    </p>
    <ul aria-label="Technologies" class="flex justify-start gap-2">
      {
        stack.map(({ Icon, label }) => (
          <li
            class="mt-3 size-[clamp(1.75rem,5cqi,2.25rem)] grid place-items-center"
            aria-label={label}
          >
            <Icon class="size-full" />
          </li>
        ))
      }
    </ul>
  </article>
</li>
